pipeline {
    agent any
    environment {
      docker = '192.168.0.248'
    }
    
    stages {
        stage('Stage1') {
          steps {
            //aquaMicroscanner imageName: 'alpine:latest', notCompliesCmd: 'exit 1', onDisallowed: 'ignore', outputFormat: 'json'
                sh 'ssh root@$docker "docker ps -a"'
            }
          }
    stage('Stage2') {
          steps {
              sh 'ssh root@$docker "docker images"'
            }
          }
    stage('Copy Dockerfile') {
          steps {
              sh 'scp ./Dockerfile root@$docker:/'
            }
          }       
    stage('Docker pull nginx') {
          steps {
              //sh 'ssh root@$docker "docker pull nginx"'
              sh 'ssh root@$docker "docker build -f /Dockerfile
            }
          }
    stage('Image Check') {
          steps {
              sh 'ssh root@$docker "docker images"'
              //sh 'ssh root@$docker "docker rmi 53f3fd8007f7"'
            }
          }       
        }
      }
